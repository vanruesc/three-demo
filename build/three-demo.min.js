/**
 * three-demo v3.16.0 build Sun Feb 02 2020
 * https://github.com/vanruesc/three-demo
 * Copyright 2020 Raoul van RÃ¼schen
 * @license Zlib
 */
!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?t(exports,require("three"),require("synthetic-event"),require("dat.gui")):"function"==typeof define&&define.amd?define(["exports","three","synthetic-event","dat.gui"],t):t((e=e||self).THREEDEMO={},e.THREE,e.SYNTHETICEVENT,e.DAT.GUI)}(this,(function(e,t,n,r){"use strict";function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function s(e,t,n){return t&&o(e.prototype,t),n&&o(e,n),e}function u(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&l(e,t)}function a(e){return(a=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function l(e,t){return(l=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function c(e,t){return!t||"object"!=typeof t&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}var d=function(){function e(){var n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"demo";i(this,e),this.id=n,this.renderer=null,this.loadingManager=new t.LoadingManager,this.assets=new Map,this.scene=new t.Scene,this.camera=null,this.controls=null,this.ready=!1}return s(e,[{key:"setRenderer",value:function(e){return this.renderer=e,this}},{key:"load",value:function(){return Promise.resolve()}},{key:"initialize",value:function(){}},{key:"render",value:function(e){this.renderer.render(this.scene,this.camera)}},{key:"registerOptions",value:function(e){}},{key:"reset",value:function(){return this.scene=new t.Scene,this.camera=null,null!==this.controls&&(this.controls.dispose(),this.controls=null),this.ready=!1,this}}]),e}(),h=function(e){function t(e){var n;return i(this,t),(n=c(this,a(t).call(this,e))).previousDemo=null,n.demo=null,n}return u(t,e),t}(n.Event),m=new h("change"),f=new h("load"),p=function(e){function n(e){var o,s=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},u=s.aside,l=void 0===u?e:u,d=s.renderer;return i(this,n),(o=c(this,a(n).call(this))).renderer=void 0!==d?d:function(){var n=new t.WebGLRenderer;return n.setSize(e.clientWidth,e.clientHeight),n.setPixelRatio(window.devicePixelRatio),n}(),e.appendChild(o.renderer.domElement),o.clock=new t.Clock,o.menu=new r.GUI({autoPlace:!1}),l.appendChild(o.menu.domElement),o.demos=new Map,o.demo=null,o.currentDemo=null,o}return u(n,e),s(n,[{key:"resetMenu",value:function(){var e=this,t=this.menu.domElement.parentNode,n=new r.GUI({autoPlace:!1});this.demos.size>1&&n.add(this,"demo",Array.from(this.demos.keys())).onChange((function(){return e.loadDemo()}));return t.removeChild(this.menu.domElement),t.appendChild(n.domElement),this.menu.destroy(),this.menu=n,n}},{key:"startDemo",value:function(e){e.id===this.demo&&(e.initialize(),e.registerOptions(this.resetMenu()),e.ready=!0,f.demo=e,this.dispatchEvent(f))}},{key:"loadDemo",value:function(){var e=this,t=this.demos.get(this.demo),n=this.currentDemo,r=this.renderer;window.location.hash=t.id,null!==n&&n.reset(),this.menu.domElement.style.display="none",m.previousDemo=n,m.demo=t,this.currentDemo=t,this.dispatchEvent(m),r.clear(),t.load().then((function(){return e.startDemo(t)})).catch(console.error)}},{key:"addDemo",value:function(e){var t=window.location.hash.slice(1),n=this.currentDemo;return this.demos.set(e.id,e.setRenderer(this.renderer)),(null===this.demo&&0===t.length||e.id===t)&&(this.demo=e.id,this.loadDemo()),this.resetMenu(),null!==n&&n.ready&&n.registerOptions(this.menu),this}},{key:"removeDemo",value:function(e){var t,n=this.demos;return n.has(e)&&(n.delete(e),this.demo===e&&n.size>0?(t=n.entries().next().value,this.demo=t[0],this.currentDemo=t[1],this.loadDemo()):(this.demo=null,this.currentDemo=null,this.renderer.clear())),this}},{key:"setSize",value:function(e,n,r){var i=this.currentDemo;if(this.renderer.setSize(e,n,r),null!==i&&null!==i.camera){var o=i.camera;o instanceof t.OrthographicCamera?(o.left=e/-2,o.right=e/2,o.top=n/2,o.bottom=n/-2,o.updateProjectionMatrix()):o instanceof t.CubeCamera||(o.aspect=e/n,o.updateProjectionMatrix())}}},{key:"render",value:function(e){var t=this.currentDemo,n=this.clock.getDelta();null!==t&&t.ready&&t.render(n)}}]),n}(n.EventTarget);e.Demo=d,e.DemoManager=p,e.DemoManagerEvent=h,Object.defineProperty(e,"__esModule",{value:!0})}));
