/**
 * three-demo v3.18.0 build Wed Mar 25 2020
 * https://github.com/vanruesc/three-demo
 * Copyright 2020 Raoul van RÃ¼schen
 * @license Zlib
 */
!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?t(exports,require("three"),require("synthetic-event"),require("dat.gui")):"function"==typeof define&&define.amd?define(["exports","three","synthetic-event","dat.gui"],t):t((e=e||self).THREEDEMO={},e.THREE,e.SYNTHETICEVENT,e.DAT.GUI)}(this,(function(e,t,n,r){"use strict";function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function s(e,t,n){return t&&o(e.prototype,t),n&&o(e,n),e}function u(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&c(e,t)}function a(e){return(a=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function c(e,t){return(c=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function l(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}function d(e,t){return!t||"object"!=typeof t&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function h(e){return function(){var t,n=a(e);if(l()){var r=a(this).constructor;t=Reflect.construct(n,arguments,r)}else t=n.apply(this,arguments);return d(this,t)}}var f=function(){function e(){var n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"demo";i(this,e),this.id=n,this.renderer=null,this.loadingManager=new t.LoadingManager,this.assets=new Map,this.scene=new t.Scene,this.camera=null,this.controls=null,this.ready=!1}return s(e,[{key:"setRenderer",value:function(e){return this.renderer=e,this}},{key:"load",value:function(){return Promise.resolve()}},{key:"initialize",value:function(){}},{key:"render",value:function(e){this.renderer.render(this.scene,this.camera)}},{key:"registerOptions",value:function(e){}},{key:"reset",value:function(){return this.scene=new t.Scene,this.camera=null,null!==this.controls&&(this.controls.dispose(),this.controls=null),this.ready=!1,this}}]),e}(),m=function(e){u(n,e);var t=h(n);function n(e){var r;return i(this,n),(r=t.call(this,e)).previousDemo=null,r.demo=null,r}return n}(n.Event),p=new m("change"),v=new m("load"),y=function(e){u(o,e);var n=h(o);function o(e){var s,u=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},a=u.aside,c=void 0===a?e:a,l=u.renderer;return i(this,o),(s=n.call(this)).renderer=void 0!==l?l:function(){var n=new t.WebGLRenderer;return n.setSize(e.clientWidth,e.clientHeight),n.setPixelRatio(window.devicePixelRatio),n}(),e.appendChild(s.renderer.domElement),s.clock=new t.Clock,s.menu=new r.GUI({autoPlace:!1}),c.appendChild(s.menu.domElement),s.demos=new Map,s.demo=null,s.currentDemo=null,s}return s(o,[{key:"resetMenu",value:function(){var e=this,t=this.menu.domElement.parentNode,n=new r.GUI({autoPlace:!1});this.demos.size>1&&n.add(this,"demo",Array.from(this.demos.keys())).onChange((function(){return e.loadDemo()}));return t.removeChild(this.menu.domElement),t.appendChild(n.domElement),this.menu.destroy(),this.menu=n,n}},{key:"startDemo",value:function(e){e.id===this.demo&&(e.initialize(),e.registerOptions(this.resetMenu()),e.ready=!0,v.demo=e,this.dispatchEvent(v))}},{key:"loadDemo",value:function(){var e=this,t=this.demos.get(this.demo),n=this.currentDemo,r=this.renderer;window.location.hash=t.id,null!==n&&n.reset(),this.menu.domElement.style.display="none",p.previousDemo=n,p.demo=t,this.currentDemo=t,this.dispatchEvent(p),r.clear(),t.load().then((function(){return e.startDemo(t)})).catch(console.error)}},{key:"addDemo",value:function(e){var t=window.location.hash.slice(1),n=this.currentDemo;return this.demos.set(e.id,e.setRenderer(this.renderer)),(null===this.demo&&0===t.length||e.id===t)&&(this.demo=e.id,this.loadDemo()),this.resetMenu(),null!==n&&n.ready&&n.registerOptions(this.menu),this}},{key:"removeDemo",value:function(e){var t,n=this.demos;return n.has(e)&&(n.delete(e),this.demo===e&&n.size>0?(t=n.entries().next().value,this.demo=t[0],this.currentDemo=t[1],this.loadDemo()):(this.demo=null,this.currentDemo=null,this.renderer.clear())),this}},{key:"setSize",value:function(e,n,r){var i=this.currentDemo;if(this.renderer.setSize(e,n,r),null!==i&&null!==i.camera){var o=i.camera;o instanceof t.OrthographicCamera?(o.left=e/-2,o.right=e/2,o.top=n/2,o.bottom=n/-2,o.updateProjectionMatrix()):o instanceof t.CubeCamera||(o.aspect=e/n,o.updateProjectionMatrix())}}},{key:"render",value:function(e){var t=this.currentDemo,n=this.clock.getDelta();null!==t&&t.ready&&t.render(n)}}]),o}(n.EventTarget);e.Demo=f,e.DemoManager=y,e.DemoManagerEvent=m,Object.defineProperty(e,"__esModule",{value:!0})}));
