/**
 * three-demo v4.0.5 build Tue Dec 01 2020
 * https://github.com/vanruesc/three-demo
 * Copyright 2020 Raoul van RÃ¼schen
 * @license Zlib
 */(function(c,s){typeof exports=="object"&&typeof module!="undefined"?s(exports,require("three"),require("dat.gui")):typeof define=="function"&&define.amd?define(["exports","three","dat.gui"],s):(c=typeof globalThis!="undefined"?globalThis:c||self,s(c.THREEDEMO={},c.THREE,c.DAT.GUI))})(this,function(c,s,y){"use strict";function d(r,t){if(!(r instanceof t))throw new TypeError("Cannot call a class as a function")}function D(r,t){for(var a=0;a<t.length;a++){var i=t[a];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(r,i.key,i)}}function g(r,t,a){return t&&D(r.prototype,t),a&&D(r,a),r}function O(r,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");r.prototype=Object.create(t&&t.prototype,{constructor:{value:r,writable:!0,configurable:!0}}),t&&m(r,t)}function f(r){return f=Object.setPrototypeOf?Object.getPrototypeOf:function(a){return a.__proto__||Object.getPrototypeOf(a)},f(r)}function m(r,t){return m=Object.setPrototypeOf||function(i,n){return i.__proto__=n,i},m(r,t)}function E(){if(typeof Reflect=="undefined"||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(r){return!1}}function w(r){if(r===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return r}function M(r,t){return t&&(typeof t=="object"||typeof t=="function")?t:w(r)}function P(r){var t=E();return function(){var i=f(r),n;if(t){var e=f(this).constructor;n=Reflect.construct(i,arguments,e)}else n=i.apply(this,arguments);return M(this,n)}}var b=function(){function r(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"demo";d(this,r),this.scene=new s.Scene,this.id=t,this.renderer=null,this.loadingManager=new s.LoadingManager,this.assets=new Map,this.scene=new s.Scene,this.camera=null,this.ready=!1}return g(r,[{key:"setRenderer",value:function(a){return this.renderer=a,this}},{key:"getCamera",value:function(){return this.camera}},{key:"load",value:function(){return Promise.resolve()}},{key:"initialize",value:function(){}},{key:"render",value:function(a){this.renderer.render(this.scene,this.camera)}},{key:"registerOptions",value:function(a){}},{key:"reset",value:function(){return this.scene=new s.Scene,this.camera=null,this.ready=!1,this}}]),r}(),h=function r(t){d(this,r),this.type=t,this.previousDemo=null,this.demo=null},v=new h("change"),_=new h("load"),k=1/1e3,R=function(r){O(a,r);var t=P(a);function a(i,n){var e,o=n.aside,l=o===void 0?i:o,u=n.renderer;if(d(this,a),e=t.call(this),e.renderer=u,e.renderer===void 0){var p=new s.WebGLRenderer;p.setSize(i.clientWidth,i.clientHeight),p.setPixelRatio(window.devicePixelRatio),e.renderer=p}return e.timestamp=0,e.menu=new y.GUI({autoPlace:!1}),e.demos=new Map,e.demo=null,e.currentDemo=null,i.appendChild(e.renderer.domElement),l.appendChild(e.menu.domElement),e}return g(a,[{key:"resetMenu",value:function(){var n=this,e=this.menu.domElement.parentNode,o=new y.GUI({autoPlace:!1});if(this.demos.size>1){var l=o.add(this,"demo",Array.from(this.demos.keys()));l.onChange(function(){return n.loadDemo()})}return e.removeChild(this.menu.domElement),e.appendChild(o.domElement),this.menu.destroy(),this.menu=o,o}},{key:"startDemo",value:function(n){n.id===this.demo&&(n.initialize(),n.registerOptions(this.resetMenu()),n.ready=!0,_.demo=n,this.dispatchEvent(_))}},{key:"loadDemo",value:function(){var n=this,e=this.demos.get(this.demo),o=this.currentDemo,l=this.renderer;window.location.hash=e.id,o!==null&&o.reset(),this.menu.domElement.style.display="none",v.previousDemo=o,v.demo=e,this.currentDemo=e,this.dispatchEvent(v),l.clear(),e.load().then(function(){return n.startDemo(e)}).catch(console.error)}},{key:"addDemo",value:function(n){var e=window.location.hash.slice(1),o=this.currentDemo;return this.demos.set(n.id,n.setRenderer(this.renderer)),(this.demo===null&&e.length===0||n.id===e)&&(this.demo=n.id,this.loadDemo()),this.resetMenu(),o!==null&&o.ready&&o.registerOptions(this.menu),this}},{key:"removeDemo",value:function(n){var e=this.demos;if(e.has(n))if(e.delete(n),this.demo===n&&e.size>0){var o=Array.from(e.entries()),l=o[0];this.demo=l[0],this.currentDemo=l[1],this.loadDemo()}else this.demo=null,this.currentDemo=null,this.renderer.clear();return this}},{key:"setSize",value:function(n,e){var o=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0,l=this.currentDemo,u=l.getCamera();this.renderer.setSize(n,e,o),l!==null&&u!==null&&(u instanceof s.OrthographicCamera?(u.left=n/-2,u.right=n/2,u.top=e/2,u.bottom=e/-2,u.updateProjectionMatrix()):u instanceof s.PerspectiveCamera&&(u.aspect=n/e,u.updateProjectionMatrix()))}},{key:"render",value:function(n){var e=(n-this.timestamp)*k;this.timestamp=n;var o=this.currentDemo;o!==null&&o.ready&&o.render(e)}}]),a}(s.EventDispatcher);c.Demo=b,c.DemoManager=R,c.DemoManagerEvent=h,Object.defineProperty(c,"__esModule",{value:!0})});
