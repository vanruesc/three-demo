/**
 * three-demo v4.0.4 build Sat Oct 31 2020
 * https://github.com/vanruesc/three-demo
 * Copyright 2020 Raoul van RÃ¼schen
 * @license Zlib
 */
!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?t(exports,require("three"),require("dat.gui")):"function"==typeof define&&define.amd?define(["exports","three","dat.gui"],t):t((e="undefined"!=typeof globalThis?globalThis:e||self).THREEDEMO={},e.THREE,e.DAT.GUI)}(this,(function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function o(e,t,n){return t&&i(e.prototype,t),n&&i(e,n),e}function s(e){return(s=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function a(e,t){return(a=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function u(e,t){return!t||"object"!=typeof t&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function c(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=s(e);if(t){var i=s(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return u(this,n)}}var l=function(){function e(){var n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"demo";r(this,e),this.scene=new t.Scene,this.id=n,this.renderer=null,this.loadingManager=new t.LoadingManager,this.assets=new Map,this.scene=new t.Scene,this.camera=null,this.ready=!1}return o(e,[{key:"setRenderer",value:function(e){return this.renderer=e,this}},{key:"getCamera",value:function(){return this.camera}},{key:"load",value:function(){return Promise.resolve()}},{key:"initialize",value:function(){}},{key:"render",value:function(e){this.renderer.render(this.scene,this.camera)}},{key:"registerOptions",value:function(e){}},{key:"reset",value:function(){return this.scene=new t.Scene,this.camera=null,this.ready=!1,this}}]),e}(),d=function e(t){r(this,e),this.type=t,this.previousDemo=null,this.demo=null},h=new d("change"),f=new d("load"),m=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&a(e,t)}(s,e);var i=c(s);function s(e,o){var a,u=o.aside,c=void 0===u?e:u,l=o.renderer;if(r(this,s),(a=i.call(this)).renderer=l,void 0===a.renderer){var d=new t.WebGLRenderer;d.setSize(e.clientWidth,e.clientHeight),d.setPixelRatio(window.devicePixelRatio),a.renderer=d}return a.timestamp=0,a.menu=new n.GUI({autoPlace:!1}),a.demos=new Map,a.demo=null,a.currentDemo=null,e.appendChild(a.renderer.domElement),c.appendChild(a.menu.domElement),a}return o(s,[{key:"resetMenu",value:function(){var e=this,t=this.menu.domElement.parentNode,r=new n.GUI({autoPlace:!1});this.demos.size>1&&r.add(this,"demo",Array.from(this.demos.keys())).onChange((function(){return e.loadDemo()}));return t.removeChild(this.menu.domElement),t.appendChild(r.domElement),this.menu.destroy(),this.menu=r,r}},{key:"startDemo",value:function(e){e.id===this.demo&&(e.initialize(),e.registerOptions(this.resetMenu()),e.ready=!0,f.demo=e,this.dispatchEvent(f))}},{key:"loadDemo",value:function(){var e=this,t=this.demos.get(this.demo),n=this.currentDemo,r=this.renderer;window.location.hash=t.id,null!==n&&n.reset(),this.menu.domElement.style.display="none",h.previousDemo=n,h.demo=t,this.currentDemo=t,this.dispatchEvent(h),r.clear(),t.load().then((function(){return e.startDemo(t)})).catch(console.error)}},{key:"addDemo",value:function(e){var t=window.location.hash.slice(1),n=this.currentDemo;return this.demos.set(e.id,e.setRenderer(this.renderer)),(null===this.demo&&0===t.length||e.id===t)&&(this.demo=e.id,this.loadDemo()),this.resetMenu(),null!==n&&n.ready&&n.registerOptions(this.menu),this}},{key:"removeDemo",value:function(e){var t=this.demos;if(t.has(e))if(t.delete(e),this.demo===e&&t.size>0){var n=Array.from(t.entries())[0];this.demo=n[0],this.currentDemo=n[1],this.loadDemo()}else this.demo=null,this.currentDemo=null,this.renderer.clear();return this}},{key:"setSize",value:function(e,n){var r=!(arguments.length>2&&void 0!==arguments[2])||arguments[2],i=this.currentDemo,o=i.getCamera();this.renderer.setSize(e,n,r),null!==i&&null!==o&&(o instanceof t.OrthographicCamera?(o.left=e/-2,o.right=e/2,o.top=n/2,o.bottom=n/-2,o.updateProjectionMatrix()):o instanceof t.PerspectiveCamera&&(o.aspect=e/n,o.updateProjectionMatrix()))}},{key:"render",value:function(e){var t=.001*(e-this.timestamp);this.timestamp=e;var n=this.currentDemo;null!==n&&n.ready&&n.render(t)}}]),s}(t.EventDispatcher);e.Demo=l,e.DemoManager=m,e.DemoManagerEvent=d,Object.defineProperty(e,"__esModule",{value:!0})}));
